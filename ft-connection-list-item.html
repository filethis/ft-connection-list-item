<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-label/iron-label.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../iron-icon/iron-icon.html">

<!--
`ft-connection-list-item`
An element that renders a single FileThis connection resource as a list item

@demo demo/index.html
-->

<dom-module id="ft-connection-list-item">

    <style include="iron-flex iron-flex-alignment"></style>

    <template>

        <div id="interior" class="layout horizontal center"
                 style="padding-left:20px;">

                <!-- Name -->
                <iron-label style="width:165px; font-family:Arial; font-size:15px;">
                    [[connection.name]]
                </iron-label>

                <div style="width:25px;"></div>

                <!-- Spacer -->
                <div class="flex"></div>
                <div style="width:25px;"></div>

                <!-- Logo -->
                <div class="layout horizontal center center-justified"
                     style="width:102px; height:72px;">
                    <img
                            style="width:auto; max-width:100%;"
                            src="[[connection.logoUrl]]">
                    </img>
                </div>

                <!-- Spacer -->
                <div style="width:25px;"></div>

                <!-- Action button and refresh date -->
                <div class="layout vertical center">

                    <!-- Action button -->
                    <paper-button raised
                                  id="actionButton"
                                  style="width:120px; height:36px; background-color:white"
                                  on-click="_onActionButtonClicked">
                        <iron-icon id="icon"></iron-icon>
                        <div style="width:3px;"></div>
                        <iron-label id="label" style="font-family:Arial; font-size:12px;"></iron-label>
                    </paper-button>

                    <div style="height:6px;"></div>

                    <!-- Refresh date -->
                    <iron-label style="font-family:Arial; font-size:small; font-style:italic;">
                        Refreshed Jan 21
                    </iron-label>
                </div>

                <!-- Spacer -->
                <div style="width:25px;"></div>

            </div>

    </template>

    <script>
        Polymer({

            is: 'ft-connection-list-item',

            properties: {
                connection:
                {
                    type: Object,
                    notify: true,
                    value: null,
                    observer: "_onConnectionChanged"
                },
                selected:
                {
                    type: Boolean,
                    notify: true,
                    value: false,
                    observer: "_onSelectedChanged"
                }
            },

            _onConnectionChanged: function()
            {
                var label;
                var icon;
                var showIcon;
                var enabled;
                if (this.connection != null)
                {
                    switch (this.connection.state)
                    {
                        case "waiting":
                            label = "Refresh";
                            enabled = true;
                            showIcon = true;
                            icon = "refresh";
                            break;
                        case "connecting":
                            label = "Connecting…";
                            enabled = false;
                            showIcon = false;
                            icon = "refresh";
                            break;
                        case "uploading":
                            label = "Downloading…";
                            enabled = false;
                            showIcon = false;
                            icon = "refresh";
                            break;
                        case "question":
                            label = "Fix It";
                            enabled = true;
                            showIcon = true;
                            icon = "report-problem";
                            break;
                        case "error":
                            label = "Fix It";
                            enabled = true;
                            showIcon = true;
                            icon = "report-problem";
                            break;
                        default:
                            label = "Refresh";
                            enabled = true;
                            showIcon = true;
                            icon = "refresh";
                            break;
                    }
                }
                this.$.label.innerHTML = label;
                this.$.actionButton.disabled = !enabled;
                this.$.icon.icon = icon;
                this.$.icon.hidden = !showIcon;
            },

            _onSelectedChanged: function()
            {
                var interior = this.$.interior;
                if (this.selected)
                    interior.style.backgroundColor = "#F6F6F6";
                else
                    interior.style.backgroundColor = "#FFFFFF";
            },

            _onActionButtonClicked: function(event, detail)
            {
                this.fire('action-button-clicked', {connection:this.connection});
            }

        });
    </script>
</dom-module>
